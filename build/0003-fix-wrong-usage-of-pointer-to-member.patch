From 23da36685076d34b58ef9e913151373490ca015a Mon Sep 17 00:00:00 2001
From: abc <abc@abc.com>
Date: Thu, 13 May 2021 22:11:17 +0200
Subject: [PATCH 3/4] fix wrong usage of pointer to member

---
 source/windows/RenderForm.cpp  | 27 +++++++++------------------
 source/xaudio2/SourceVoice.cpp | 21 +++++++--------------
 source/xaudio2/XAudio2.cpp     |  9 +++------
 3 files changed, 19 insertions(+), 38 deletions(-)

diff --git source/windows/RenderForm.cpp source/windows/RenderForm.cpp
index d443fd1..95124e0 100644
--- source/windows/RenderForm.cpp
+++ source/windows/RenderForm.cpp
@@ -91,56 +91,47 @@ namespace Windows
 
 	void RenderForm::OnPauseRendering(EventArgs^ e)
 	{
-		if (&RenderForm::PauseRendering != nullptr)
-			PauseRendering(this, e);
+		PauseRendering(this, e);
 	}
 
 	void RenderForm::OnResumeRendering(EventArgs^ e)
 	{
-		if (&RenderForm::ResumeRendering != nullptr)
-			ResumeRendering(this, e);
+		ResumeRendering(this, e);
 	}
 
 	void RenderForm::OnUserResized(EventArgs^ e)
 	{
-		if (&RenderForm::UserResized != nullptr)
-			UserResized(this, e);
+		UserResized(this, e);
 	}
 
 	void RenderForm::OnMonitorChanged(EventArgs^ e)
 	{
-		if (&RenderForm::MonitorChanged != nullptr)
-			MonitorChanged(this, e);
+		MonitorChanged(this, e);
 	}
 
 	void RenderForm::OnAppActivated(EventArgs^ e)
 	{
-		if (&RenderForm::AppActivated != nullptr)
-			AppActivated(this, e);
+		AppActivated(this, e);
 	}
 
 	void RenderForm::OnAppDeactivated(EventArgs^ e)
 	{
-		if (&RenderForm::AppDeactivated != nullptr)
-			AppDeactivated(this, e);
+		AppDeactivated(this, e);
 	}
 
 	void RenderForm::OnSystemSuspend(EventArgs^ e)
 	{
-		if (&RenderForm::SystemSuspend != nullptr)
-			SystemSuspend(this, e);
+		SystemSuspend(this, e);
 	}
 
 	void RenderForm::OnSystemResume(EventArgs^ e)
 	{
-		if (&RenderForm::SystemResume != nullptr)
-			SystemResume(this, e);
+		SystemResume(this, e);
 	}
 
 	void RenderForm::OnScreensaver(CancelEventArgs^ e)
 	{
-		if (&RenderForm::Screensaver != nullptr)
-			Screensaver(this, e);
+		Screensaver(this, e);
 	}
 
 	void RenderForm::WndProc( Message% m )
diff --git source/xaudio2/SourceVoice.cpp source/xaudio2/SourceVoice.cpp
index f0e6801..589968c 100644
--- source/xaudio2/SourceVoice.cpp
+++ source/xaudio2/SourceVoice.cpp
@@ -103,44 +103,37 @@ namespace XAudio2
 
 	void SourceVoice::OnBufferEnd( ContextEventArgs^ e )
 	{
-		if( &SourceVoice::BufferEnd != nullptr )
-			BufferEnd( this, e );
+		BufferEnd( this, e );
 	}
 
 	void SourceVoice::OnBufferStart( ContextEventArgs^ e )
 	{
-		if( &SourceVoice::BufferStart != nullptr )
-			BufferStart( this, e );
+		BufferStart( this, e );
 	}
 
 	void SourceVoice::OnLoopEnd( ContextEventArgs^ e )
 	{
-		if( &SourceVoice::LoopEnd != nullptr )
-			LoopEnd( this, e );
+		LoopEnd( this, e );
 	}
 
 	void SourceVoice::OnStreamEnd( EventArgs^ e )
 	{
-		if( &SourceVoice::StreamEnd != nullptr )
-			StreamEnd( this, e );
+		StreamEnd( this, e );
 	}
 
 	void SourceVoice::OnVoiceError( ErrorEventArgs^ e )
 	{
-		if( &SourceVoice::VoiceError != nullptr )
-			VoiceError( this, e );
+		VoiceError( this, e );
 	}
 
 	void SourceVoice::OnVoiceProcessingPassEnd( EventArgs^ e )
 	{
-		if( &SourceVoice::VoiceProcessingPassEnd != nullptr )
-			VoiceProcessingPassEnd( this, e );
+		VoiceProcessingPassEnd( this, e );
 	}
 
 	void SourceVoice::OnVoiceProcessingPassStart( int bytesRequired )
 	{
-		if( &SourceVoice::VoiceProcessingPassStart != nullptr )
-			VoiceProcessingPassStart( this, gcnew StartProcessingEventArgs( bytesRequired )  );
+		VoiceProcessingPassStart( this, gcnew StartProcessingEventArgs( bytesRequired )  );
 	}
 
 	Result SourceVoice::Discontinuity()
diff --git source/xaudio2/XAudio2.cpp source/xaudio2/XAudio2.cpp
index 438e5e4..2bb3e14 100644
--- source/xaudio2/XAudio2.cpp
+++ source/xaudio2/XAudio2.cpp
@@ -164,20 +164,17 @@ namespace XAudio2
 
 	void XAudio2::OnCriticalError(ErrorEventArgs^ e)
 	{
-		if( &XAudio2::CriticalError != nullptr )
-			CriticalError( this, e );
+		CriticalError( this, e );
 	}
 
 	void XAudio2::OnProcessingPassEnd(EventArgs^ e)
 	{
-		if( &XAudio2::ProcessingPassEnd != nullptr )
-			ProcessingPassEnd( this, e );
+		ProcessingPassEnd( this, e );
 	}
 
 	void XAudio2::OnProcessingPassStart(EventArgs^ e)
 	{
-		if( &XAudio2::ProcessingPassStart != nullptr )
-			ProcessingPassStart( this, e );
+		ProcessingPassStart( this, e );
 	}
 
 	Guid XAudio2::FormatSubtypePcm::get()
-- 
2.29.2.windows.2

